\chapter{Case-tapaus: Sovelia PLM:n raportointityökalu} \label{Case-tapaus: Sovelia PLM:n raportointityökalu}

\section{Sovelia PLM} \label{PLM-järjestelmät}

Kehitettävän raportointityökalun toimintaympäristönä toimii kaupallinen PLM-järjestelmä, Sovelia PLM. Sovelia PLM:n kehitys on alkanut yli 30 vuotta sitten ja sen kehitys jatkuu aktiivisesti edelleen. Kuten muutkin PLM-järjestelmät, Sovelia PLM pyrkii ratkaisemaan valmistusalan yritysten haasteita liittyen tuotteen datan hallintaan sen koko elinkaaren ajan. \cite{soveliaAboutSovelia} Sovelia PLM:n erityispiirteenä on sisältämät valmiiksi konfiguroidut \textit{"templatet"} eli valmiit mallit objekteille ja prosesseille, jotka ovat muokattavissa asiakkaan tarpeiden mukaan. Lisäksi malleihin kuuluu muita valmiiksi konfiguroituja työkaluja että alalla hyväksi todettuja prosesseja. \cite{soveliaSoveliaGetting}

Sovelia PLM koostuu objekteista ja objektilinkeistä. Objekteja voidaan määritellä niiden attribuuttien avulla. Objektit voivat olla osia, piirustuksia, dokumenttilinkkejä tai linkkejä muihin toimintoihin. \cite{soveliaSoveliaGetting} Objektilinkkien avulla voidaan muodostaa osaluetteloita, jotka ovat tärkeitä raportoinnin kohteita. Näiden lisäksi toinen merkittävä konsepti Soveliassa on käyttäjä ja käyttäjäryhmät. Yksinkertaisuudessaan järjestelmällä voi olla luonnollisesti useita käyttäjiä ja käyttäjät voivat kutsua eri käyttäjäryhmiin. Käyttäjäryhmiä voi olla useita, mutta tärkein niistä on ymmärtää \textit{"admin"}-ryhmä (engl. \textit{administrator}), johon kuuluu pääkäyttäjät eli järjestelmänvalvojat. Järjestelmänvalvojalla on luonnollisesti oikeuden muuttaa järjestelmän asetuksia. Pääkäyttäjän konsepti on tärkeä ymmärtää, sillä osa kehitettävän raportointityökalun ominaisuuksista on saatavilla vain pääkäyttäjälle. Käyttäjäryhmien lisäksi jokaisella käyttäjällä on lisenssi, joka määrittelee osaltaan käyttäjän oikeuksia rajoittamalla esimerkiksi objektien ja objektilinkkien muokkausoikeuksia. \cite{soveliaUserManagement}

\subsubsection{Raportointi Sovelia PLM-järjestelmässä}

Sovelia PLM ja muut PLM-järjestelmät poikkeavat valmiiden raportointityökaluratkaisujen tyypillisistä toimintaympäristöistä, sillä kuten luvussa \ref{PLM-järjestelmä toimintaympäristönä} huomattiin, PLM-data on usein kompleksista ja monimuotoista. Siemensin PLM-järjestelmän verkkosivuilla julkaistussa artikkelissa \textit{"The Challenge of Getting High Quality Reports out of PLM"} \cite{german_challenge_2016} (2016) esitellään haasteita, joita liittyy korkealaatuisten raporttien tuottamiseen PLM-järjestelmistä. Artikkeli nostaa esille osaluetteloiden (BOM) merkityksen PLM-järjestelmän raportoinnissa: on tärkeää että raporttien saama ja tuottama data on luotettavaa ja laadukasta, jotta päätöksenteko raporttien pohjalta olisi mahdollista. Osaluetteloihin voi tulla jopa satoja muutoksia päivittäin, joten raporttien tapauksessa on tärkeää, että niiden käyttäjät tietävät työskentelevänsä oikean datan kanssa. Täten raporttien ajantasaisuus ja selkeät aikaleimat ovat hyvin tärkeitä PLM-järjestelmän ja myös Sovelian tuottamille raporteille. Sovelia PLM:n raportointimoottorin etuna on hakurajapinnan käyttö, joka palauttaa aina hakupyynnön mukaisesti ajankohtaista dataa, mikä vähentää mahdollisten virheellisten tietojen määrää.

PLM-datan kompleksisuus tekee raportointityökalun kehittämisestä haasteellista, sillä myös Sovelia PLM vaatii erityisesti tarkoitusta varten kehitetyn raportointityökaluratkaisun. Tarkoitusta varten kehitetty ratkaisu on ohjelmistokehittäjälle työläs rakentaa alusta asti itse, mutta sen etuna on sen täysi muovautuvuus tarvetta varten. On kuitenkin todettava, että myös valmiin raportointimoottorin ja -työkalun implementoiminen Sovelia PLM:n toimintaympäristöön olisi todennäköistä työlästä juuri PLM-datan kompleksisuuden vuoksi.

\subsubsection{Sovelia PLM:n vanha raportointityökalu}

Sovelia PLM -järjestelmässä on tuotannossa ja asiakkailla käytössä vanha raportointiyökalu, joka tarjoaa raportteja PDF, Excel ja ZIP-tiedostoformaateissa. Näistä poikkeavimpia ovat ZIP-raportit eli ZIP-arkistot, \nomenclature[ZIP]{ZIP}{Tiedon pakkaukseen käytetty tiedostomuoto, joka voi sisältää useita tiedostoja ja kansioita pakattuna} jotka sisältävät useita PDF- tai Excel-raportteja pakattuna yhteen tiedostoon. Täten ZIP-raporttiin voidaan sisällyttää esimerkiksi raportti tuoterakenteen jokaiselle yksittäiselle objektille, jolloin ZIP-paketin kansiorakenne vastaa itsessään tuotteen rakennetta. Raporttidokumenttein data kerätään \textit{"rakenneagentin"} avulla, joka on nimensä mukaisesti osaa kulkea objekti-linkki -suhteita pitkin ja täten kerätä tarvittavan lähdedatan raportin koostamista varten. Itse raporttidokumentteihin kirjoittaminen tapahtuu Java-ohjelmointikielen Apache FOP-ohjelmakirjaston \cite{noauthor_apachetm_nodate} avulla XSL-\nomenclature[XSL]{XSL}{XML-kieliperhe, joka mahdollistaa XML-pohjaisten tiedostojen ulkoasun ja rakennemuutoksen määrittelyn} (engl. \textit{Extensible Stylesheet Language}, kieliperhe, joka mahdollistaa XML-pohjaisten tiedostojen ulkoasun ja rakennemuutoksen määrittelyn) ja XML-tietorakenteisiin tallennetun datan antaman ohjeistuksen avulla.

Vaikka tämä ratkaisu on toimiva ja edelleen kelvollinen tekniikka dokumenttien muotoiluun, ja siten raporttien generointiin ohjelmallisesti ennalta määritellyn datan mukaisesti, se kohtaa ongelmia datamäärien kasvaessa. Näihin ongelmiin kuuluu esimerkiksi liiallinen muistinkäyttö palvelimilla, prosessin hitaus varsinkin suurempien tuoterakenteiden tapauksissa ja raporttien konfiguroinnin haasteellisuus sen ollessa täysin mahdotonta PLM-järjestelmän loppukäyttäjille. Lisäksi toiminnon ylläpito alati muuttuvassa toimintaympäristössä muuttuu todennäköisesti haasteellisemmaksi tulevaisuudessa, kun uusi teknologia syrjäyttää vanhaa yhä useammilla osa-alueilla, kun vanhalle pohjalle rakennettu raportointimoottori ei voi enää pysyä muutoksen tahdissa.

\subsubsection{Uuden raportointityökalun haasteet}

Koska vanhan raportointityökalun modernisointi ja päivittäminen nykypäivään vaatisi perustavanlaatuisia muutoksia koko järjestelmään, päädyttiin valitsemaan kehityskohteeksi kokonaan uuden raportointityökalun kehittämisen. Uuden työkalun tarkoituksena on integroitua paremmin nykyiseen Web-pohjaiseen käyttöliittymään ja tarjota käyttäjäystävällisemmän kokemuksen raporttien luomiseen. Raporttien luominen tuoterakenteista tapahtuisi käyttäjän näkökulmasta paremmin integroituna Web-käyttöliittymään tarjoten mahdollisuuden seurata meneillään olevien raporttien edistymistä sekä perua raporttien koostamisprosesseja käyttöliittymästä käsin. Lisäksi pääkäyttäjällä tulisi olla mahdollisuus muokata ja luoda uusia raporttityyppejä muokkaamalla esimerkiksi raporteissa esitettäviä sarakkeita ja tuoterakenteiden suodattamiseen liittyviä sääntöjä. Myös raporttien ulkonäön tulee olla muokattavissa pääkäyttäjän toimesta, mikä tarkoittaa niiden visuaalisen ilmeen muokkausta lisäämällä asiakasyrityksen logoja, muokkaamalla väriteemaa ja asettelua asiakkaan tarpeiden mukaisesti.

Uuden raportointityökalun tulee ensimmäisessä vaiheessa sisältää samat toiminnallisuudet kuin vanha raportointityökalu, mutta tarkoituksena on tuottaa raportteja huomattavasti nopeammin aiheuttamalla samanaikaisesti vähemmän kuormaa palvelimelle. Raporttien sisällön ja yleisen rakenteen tulee vastata vanhempia raportteja identtisesti, mutta raporttien visuaalinen ilme tulee päivittää nykypäivän standardien mukaiseksi. Lisäksi vaaditaan syvällisiä teknologiatutkimusta ja -analyysiä olemassa olevien raportointityökalujen ja -moottorien ratkaisuista, Sovelia PLM:n ohjelmakannassa jo olemassa olevista komponenteista ja muista mahdollisesti hyödyllisistä teknologioista.

\section{Nykyiset erilliset raportointityökalut}

Ennen käytettävien teknologioiden ja tekniikoiden valintaa on hyvä perehtyä jo olemassa oleviin raportointityökaluihin ja -moottoreihin, jotta voidaan muodostaa kokonaiskuva yleisesti käytössä olevista ratkaisuista. Hyvän kokonaiskuvan avulla voidaan tehdä valistuneita päätöksiä siitä, miten raportointityökalua kannattaa lähteä kehittämään sekä ymmärtää käytössä olevien tekniikoiden hyötyjä ja rajoituksia PLM-järjestelmän kontekstissa. Analysoimme kuutta suosittua itsenäistä (engl. \textit{standalone}) raportointityökalua, joista neljä ovat kaupallisia ja kaksi ovat avoimen lähdekoodin ohjelmistoja. Juuri nämä kuusi raportointityökalua valittiin tarkasteltavaksi, sillä ne ovat kaikki paikallisesti asennettavia ohjelmistoja (engl. \textit{On-premise software}) kuten myös Sovelia PLM. Täten tässä tutkimuksessa ei keskitytä esimerkiksi ulkoisten pilvipalveluiden raportointityökalu verkko-ohjelmointirajapintoihin (engl. \textit{Web API}). Yksi esimerkki tällaisesta verkkopohjaisesta API:sta on \textit{Bold Reports} \cite{noauthor_bi_2022}, joka tarjoaa monipuolisen verkkorajapinnan kautta toimivan raportointityökalun. Toinen kriteeri tarkasteluun valinnalle oli käytettävä teknologia, sillä Sovelia PLM:n nykyinen arkkitehtuuri nojaa vahvasti Java- ja JavaScript-ohjelmointikieliin, joten täysin uuden ohjelmointikielen lisäämistä järjestelmäarkkitehtuurin pinoon ylläpidettäväksi ei pidetty mielekkäänä vaihtoehtona. Lisäksi esimerkkejä sekä Java- että JavaScript-pohjaisia raportointityökaluista löytyi runsaasti, joten uuden teknologian valitseminen ei vaikuttanut välttämättömyydeltä. Kolmas tärkeä kriteeri oli ulostulodataformaattien monipuolisuus: koska Sovelia PLM -järjestelmään kehitettävän raportointityökalun tulee tuottaa raportteja eri tiedostoformaateissa, tulee myös tarkasteltavien työkalujenkin.

Puhtaasti kaupallisia ohjelmistoja ovat JavaScript-pohjainen \textit{ActiveReportsJS}, SAP:in, maailman suurimman yritysohjelmistoja tarjoavan yrityksen \cite{noauthor_sap_nodate-3}, kaksi raportointityökalua \textit{SAP Business Objects} ja \textit{SAP Crystal Reports} ja Oraclen, talouslehti Forbesin mukaan vuoden 2023 80. suurimman julkisen yrityksen \cite{tucker_global_nodate}, raportointityökalu \textit{Orancle BI Publisher}. Vahva esimerkki taas avoimen lähdekoodin vaihtoehdosta on \textit{JasperReports}, joka kutsuu itseään suosituimmaksi avoimen lähdekoodin Java-raportointikirjastoksi. \cite{noauthor_jasperreports_nodate}. \textit{JasperReports} sisältää myös visuaalisen suunnittelutyökalun, \textit{iReport Designerin}, joten \textit{JasperReports} on kokonainen raportointityökaluohjelmisto. \textit{JasperReports} sisältää myös vaihtoehtoisen maksullisen lisenssin yrityskäyttöön tarjoten yritysasiakkaille parempaa tukea ja ratkaisua suuremman skaalan raportointiin. \cite{noauthor_reporting_nodate} Toinen avoimen lähdekoodin raportointityökalu on myös Java-pohjainen \textit{BIRT} (lyhenne engl. \textit{"Business Intelligence Reporting Tool"}), joka tarjoaa monipuolisia raportointimahdollisuuksia täysin avoimen lähdekoodin ja Eurooppalaisen \textit{Eclipse Foundationin} ylläpitämä ohjelmisto. \cite{eclipsebirtBIRT} \textit{BIRT} on keskittynyt raportoinnin lisäksi myös Business Intelligencen hyödyntämiseen asiakas- ja web-applikaatioissa, joten se sisältää monia erilaisia visualisointimahdollisuuksia ja raportointimoottorin lisäksi myös graafisen raporttikonfigurointityökalun.

\subsubsection{Nykyisten raportointityökalujen yleiskuva}

Raportointityökalua kehittääkseen osaksi PLM-järjestelmää varten tulee lisenssien lisäksi ottaa huomioon myös muita ominaisuuksia. Liitteenä olevassa taulukossa \ref{tab:Yleista} luokitellaan raportointiyökalujen yleisiä ominaisuuksia. Jo mainitut lisenssit ovat eritelty kaupallisiin ja avoimen lähdekoodin ohjelmistoihin. Avoimen lähdekoodin ohjelmistot tarjoavat asiantuntijoille lähdekoodin perehtymisen avulla syvän katsauksen raportointityökalun sisäiseen toiminnallisuuteen, mutta tässä tutkimuksessa keskitymme enemmän pintapuolisempiin ominaisuuksiin ja teknologiavalintoihin tarkemman lähdekoodianalyysin sijasta. Yksi tällaisista ominaisuuksista on lähdedatan formaatti ja mahdolliset datalähteet. Kaikki tutkitut raportointityökalut tukivat jotakin rakenteellisen datan tallentamiseen suunniteltua tiedostoformaattia eli tässä tapauksessa XML:ää tai JSON:ia. Ainoastaan \textit(ActiveReportsJS) ei tukenut XML:ää, mutta tukee kuitenkin luonnollisesti JavaScript-pohjaisena JSON:ia. Rakenteellisen datan tukeminen tärkeää varsinkin PLM:n datan tapauksessa, jossa objektien ja siten tuotteiden väliset suhteet ovat avainasemassa. Näiden tiedostoformaattien lisäksi noin puolet tarkasteltavista raportointityökaluista tuki myös SQL-kyselyitä tietolähteenä \nomenclature[SQL]{SQL}{engl. \textit{Structured Query Language}, standardoitu kyselykieli, jolla relaatiotietokantaan voi tehdä erilaisia hakuja, muutoksia ja lisäyksiä} (engl. \textit{Structured Query Language}). Näiden lisäksi myös tavallisten tekstitiedostojen käyttö tietolähteenä on tyypillistä XML- ja JSON-tiedostojen lisäksi, kuten myös Excel-taulukkolaskentaohjelman tuottamat XLSX-tiedostot. Mielenkiintoista on, että myös Excelin tuottamat XLSX-tiedostot koostuvat itseasiasiassa vain ZIP-pakatuista XML-tiedostoista. \cite{miner_under_2022}

Raportointityökalujen ohjelmointikieliä tarkastellessa suosituimmaksi ilmeni Java, sillä kaikki paitsi \textit(ActiveReportsJS) olivat Java-pohjaisia. Yksi syy tähän voi olla Javan suuri ja vakaa suosio 1990-lopussa ja 2000-luvun alussa ohjelmointikielten suosiota mittaavan \textit{TIOBE indexin} mukaan\cite{noauthor_tiobe_nodate}, jolloin suurinta osaa näistä raportointityökaluista alettu kehittää. Esimerkiksi \textit{JasperReportsia} on alettu kehittää vuonna 2001 \cite{noauthor_origin_2006}, \textit{BIRTiä} vuonna 2004 \cite{noauthor_eclipse_2004} ja \textit{BusinessObjectsia} jo vuonna 1995 ennen kuin se kuului SAP-tuoteperheeseen \cite{alma9922048891805971}. Kuten {TIOBE indexistä} voidaan havaita, on Java edelleen suhteellisen suosittu kieli käyttää vuonna 2023, mutta sen suosio on kuitenkin jo hieman laskussa. Raporttipohjien konfigurointi tapahtuu raportointityökaluissa pääsääntöisesti jonkin käyttöliittymän avulla. Käyttöliittymän lisäksi \textit{ActiveReportsJS} tarjoaa mahdollisuuden konfiguroida raporttipohjia JSON-datan avulla, \textit{BIRT} ja  \textit{JasperReports} XML-datan avulla ja \textit{Oracle BI Publisher} RTF (engl. \textit{Rich Text Format}, eroaa tavallisesta tekstistä tallentamalla tiedostoon myös fontit, fonttikoot ja yleisen muotoilun, mm. kursivoinnin) ja XSL-pohjaisesti. Tästä voidaan havaita, että visuaalinen käyttöliittymä raporttipohjien luomiselle on suosituin tapa toimia, mutta tiedostopohjainen raporttipohjien muokkaus on käypä vaihtoehto.

\subsubsection{Nykyisten raportointityökalujen ulostuloformaatit}

Raportointityökalun tärkein tehtävä on tuottaa raportteja, jolloin raporttien tulee olla myös helposti avattavissa ja esitettävissä. Liitteenä olevassa taulukossa \ref{tab:Formaatit} tarkastellaan samojen kuuden raportointityökalun tarjoamia ulostuloformaatteja, eli sitä millaisissa tiedostomuodoissa työkalut tarjoavat raportteja. Ulostuloformaateista erityisen suosittu on Adoben kehittämä PDF (engl. \textit{Portable Document Format}), jota käytetään erityisesti sähköiseen julkaisemiseen. PDF on ollut ISO-standardi vuodesta 2007 alkaen ja ISO (engl. \textit{International Organization for Standardization}, kansainvälinen standardisoimisjärjestö) kuvailee sitä maailman suosituimmaksi dokumenttitiedostoformaatiksi \cite{naden_standard_2021}. Suosionsa ja standardoinnin vuoksi PDF onkin luonnollinen valinta raportointityökalun ulostuloformaatille ja siksi myös kaikki kuusi tarkastelvaa raportointityökalua tarjoavat raportteja PDF-muodossa.

\section{Uuden raportointityökalun kehitys}

Ensimmäinen haaste raportointityökalun kehittämiselle on käytettävien tekniikoiden ja teknologioiden valinta. Koska tarkoituksena on kehittää täysin uusi toiminnallisuus alusta alkaen, on tärkeää ymmärtää nykyiset Sovelia PLM:ssä käytössä olevat komponentit palvelinarkkitehtuurien näkökulmasta. Itse raportointimoottori täytyy toimia jollakin palvelimella koostaa valmiit raportit palvelinpäässä ennen niiden lataamista käyttäjien saataville. Tällä menettelyllä voidaan vähentää asiakaspään kuormaa siirtämällä raskaampi laskenta palvelimen vastuulle. Raportointimoottorin palvelinympäristöksi valiutui Sovelia PLM:ssä jo käytössä oleva Node.js, joka tarjoaa erilaisia palveluita ja rajapintoja Sovelia PLM:n Web-käyttöliittymälle. Näihin palveluihin kuuluu esimerkiksi 3D-näkymien ja -tiedostojen tarjoaminen Web-käyttöliittymälle, joten myös raportointimoottorin sisällyttäminen samalle palvelimelle oli luonteva ratkaisu. Node.js on avoimen lähdekoodin alustariippumaton ajoympäristö JavaScript-koodin suorittamiseen palvelimella ja se on Stack Overflown teettämän kyselyn mukaan yleisin käytetty Web-teknologioita ammattikehittäjien keskuudessa React.js:n ohella n. 42 prosentin käyttöasteella. \cite{stackoverflowStackOverflow} Tärkeää on huomata, että Node.js on vuoden 2023 johtava teknologia JavaScriptin käyttöön palvelinpuolella, sillä React.js on tarkoitettu enemmänkin käyttöliittymien kehittämiseen asiakaspäässä. Node.js tarjoaa oletuksena paketinhallintajärjestelmän nimeltään NPM (engl. \textit{Node Package Manager}, tyyliteltynä npm), joka koostuu komentorivityökalusta ja JavaScript -ohjelmapaketteja ylläpitävästä tietokannasta. NPM:n avulla erillisten ohjelmakirjastojen sisällyttäminen ja käyttöönotto on yksinkertaista ja nopeaa. \cite{npmjsAbout}

Node.js on siis hyvin suosittu ja monipuolinen ympäristö. Sen suosion vuoksi Node.js:n tapauksessa käytettävissä on laaja kattaus erilaisia hyödyllisiä ohjelmakirjastoja.

\subsubsection{Mitä voimme ottaa mukaan nykyisistä ratkaisuista ja mikä todettiin toimivaksi?}

\subsubsection{Mitä emme voi hyödyntää ja miksi?}
